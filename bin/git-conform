#!/usr/bin/env ruby

$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '..', 'lib')

begin
  require 'git-conform'
rescue LoadError
  require 'rubygems'
  require 'git-conform'
end

options = Trollop::options do

  version Git::Conform::COPYRIGHT
  banner Git::Conform::BANNER

end

repo = begin
  Git::Conform::Repo.new(Dir.pwd)
rescue RuntimeError
  unless $!.message =~ /The given path is not a valid Git repository/
    unless $!.message =~ /Not a git repository \(or any of the parent directories\)/
      raise # Rugged uses generic RuntimeErrors, so we have to check the exception messages...
    end
  end
  nil
end

unless repo
  STDERR.puts "Error: \"#{Dir.pwd}\" is not a git working directory... exiting!"
  exit -1
end

unless repo.git_conform_enabled?
  STDERR.puts "Error: cannot find \".gitconform\" in \"#{repo.workdir}\"... exiting!"
  exit -1
end

fail "Coming soon!"

# That's all, Folks!
